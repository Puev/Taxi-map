<!doctype html><html><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width, initial-scale=1'/><title>Driver</title></head><body><h3>Driver simulator</h3><label>Driver ID: <input id='driverId' value='1'></label><button id='connect'>Connect</button><button id='accept' disabled>Accept order</button><button id='sendPos' disabled>Send pos</button><script>let ws=null; document.getElementById('connect').onclick = ()=>{ const id=document.getElementById('driverId').value; const BACKEND = (location.hostname==='localhost')? 'ws://localhost:8000' : 'wss://YOUR_BACKEND_URL'; ws=new WebSocket(BACKEND + '/ws/drivers/' + id); ws.onopen = ()=>{ document.getElementById('accept').disabled=false; document.getElementById('sendPos').disabled=false; }; ws.onmessage = e=>{ const m=JSON.parse(e.data); console.log(m); if(m.type==='new_order'){ window.lastOrder=m.order_id; alert('New order: '+m.order_id); } }; }; document.getElementById('accept').onclick = ()=>{ if(ws && window.lastOrder) ws.send(JSON.stringify({type:'accept', order_id: window.lastOrder})); }; document.getElementById('sendPos').onclick = ()=>{ if(!ws) return; const lat = 48.62 + (Math.random()-0.5)/100; const lng = 22.28 + (Math.random()-0.5)/100; ws.send(JSON.stringify({type:'pos', lat:lat, lng:lng})); };</script></body></html>